// markdown-dark.scss
// 作用：为 BlockNote 编辑器提供简洁的暗色 Markdown 样式，统一以 .markdown-body 为作用域

.dark {
  .markdown-body {
    font-family: Inter, system-ui, Avenir, Helvetica, Arial, sans-serif;
    color: #e5e7eb;
    line-height: 1.5;

    // 光标颜色统一为浅色
    caret-color: #e5e7eb !important;

    * {
      caret-color: #e5e7eb !important;
    }

    // BlockNote 默认样式微调
    .ProseMirror.bn-editor.bn-default-styles {
      padding-inline-start: 0 !important;
      padding-inline-end: 0 !important;
    }

    // Block 内容上下间距压缩
    .bn-block-content {
      padding-top: 0 !important;
      padding-bottom: 0 !important;
    }

    // 隐藏空行 placeholder
    .bn-block-content[data-is-empty-and-focused] .bn-inline-content::before {
      content: '' !important;
      display: none !important;
    }

    .bn-block-content[data-is-empty-and-focused] .bn-inline-content:has(> .ProseMirror-trailingBreak:only-child)::before {
      content: '' !important;
      display: none !important;
    }

    // 标题
    h1 {
      font-size: 20px;
      font-weight: 600;
      line-height: 150%;
      color: #e5e7eb;
      margin: 0 0 10px;
    }

    h2 {
      font-size: 19px;
      font-weight: 600;
      line-height: 150%;
      color: #e5e7eb;
      margin: 0 0 10px;
    }

    .bn-block-outer:not(:first-child) h2,
    .bn-block:not(:first-child) h2 {
      margin-top: 15px;
    }

    h3 {
      font-size: 17px;
      font-weight: 600;
      line-height: 150%;
      color: #e5e7eb;
      margin: 0 0 10px;
    }

    // 段落与列表
    p,
    ol,
    ul {
      font-size: 17px;
      font-weight: 400;
      line-height: 150%;
      color: #e5e7eb;
      margin: 0 0 20px;
    }

    ol,
    ul {
      padding-left: 1.25rem;
    }

    // 链接
    a {
      color: #60a5fa;
      text-decoration: none;
    }

    a:hover {
      text-decoration: underline;
    }

    // 行内代码与代码块
    code {
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace;
      font-size: 0.95em;
      background: #111827; // gray-900
      border: 1px solid #1f2937; // gray-800
      color: #e5e7eb;
      padding: 0.15em 0.35em;
      border-radius: 4px;
    }

    pre {
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace;
      font-size: 0.9em;
      background: #0b1220; // 深色代码背景
      border: 1px solid #1f2937; // gray-800
      color: #e5e7eb;
      padding: 12px;
      border-radius: 6px;
      overflow: auto;
      margin: 0 0 16px;
    }

    pre code {
      background: transparent;
      border: 0;
      padding: 0;
    }

    // 引用
    blockquote {
      margin: 0 0 16px;
      padding: 8px 12px;
      border-left: 3px solid #374151; // gray-700
      background: #0b1220;
      color: #e5e7eb;
      border-radius: 4px;
    }

    // 分割线
    hr {
      height: 1px;
      border: 0;
      background: #374151; // gray-700
      margin: 20px 0;
    }

    // Checklist
    .bn-checklist {
      font-size: 17px;
      line-height: 150%;

      .bn-checklist-item {
        display: flex;
        align-items: flex-start;
        color: #e5e7eb;
        line-height: 150%;
      }
    }

    // 图片相关选中样式移除（保持交互，不关闭 pointer-events）
    [data-content-type='image'],
    [data-node-type='image'],
    .bn-block[data-content-type='image'],
    .bn-block-outer[data-content-type='image'] {
      outline: none !important;
      border: none !important;
      box-shadow: none !important;
      background: transparent !important;
    }

    [data-content-type='image']:focus,
    [data-content-type='image']:focus-within,
    [data-content-type='image'][data-is-focused],
    [data-content-type='image'][data-is-selected],
    .bn-block[data-content-type='image'].bn-block-selected {
      outline: none !important;
      border: none !important;
      box-shadow: none !important;
      background: transparent !important;
    }

    img {
      outline: none !important;
      border: none !important;
      -webkit-tap-highlight-color: transparent;
    }
  }
}